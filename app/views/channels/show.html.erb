    <!-- 0 -->
    <!-- TOP 最上層 搜尋 新的工作空間 -->
    <div class="border-b stork-nav px-6 py-2 flex items-center justify-end">
      <!-- <div class="stork-wrapper flex justify-between"> -->
        <!-- <div class="flex justify-start items-center"> -->
          <div class="mb-1 font-extrabold flex-grow flex justify-end items-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-history" viewBox="0 0 16 16">
              <path d="M8.515 1.019A7 7 0 0 0 8 1V0a8 8 0 0 1 .589.022l-.074.997zm2.004.45a7.003 7.003 0 0 0-.985-.299l.219-.976c.383.086.76.2 1.126.342l-.36.933zm1.37.71a7.01 7.01 0 0 0-.439-.27l.493-.87a8.025 8.025 0 0 1 .979.654l-.615.789a6.996 6.996 0 0 0-.418-.302zm1.834 1.79a6.99 6.99 0 0 0-.653-.796l.724-.69c.27.285.52.59.747.91l-.818.576zm.744 1.352a7.08 7.08 0 0 0-.214-.468l.893-.45a7.976 7.976 0 0 1 .45 1.088l-.95.313a7.023 7.023 0 0 0-.179-.483zm.53 2.507a6.991 6.991 0 0 0-.1-1.025l.985-.17c.067.386.106.778.116 1.17l-1 .025zm-.131 1.538c.033-.17.06-.339.081-.51l.993.123a7.957 7.957 0 0 1-.23 1.155l-.964-.267c.046-.165.086-.332.12-.501zm-.952 2.379c.184-.29.346-.594.486-.908l.914.405c-.16.36-.345.706-.555 1.038l-.845-.535zm-.964 1.205c.122-.122.239-.248.35-.378l.758.653a8.073 8.073 0 0 1-.401.432l-.707-.707z"/>
              <path d="M8 1a7 7 0 1 0 4.95 11.95l.707.707A8.001 8.001 0 1 1 8 0v1z"/>
              <path d="M7.5 3a.5.5 0 0 1 .5.5v5.21l3.248 1.856a.5.5 0 0 1-.496.868l-3.5-2A.5.5 0 0 1 7 9V3.5a.5.5 0 0 1 .5-.5z"/>
            </svg>
          </div>

          <!-- 放大鏡  space-search-group-->
          <div class="space-search-group mx-3 mb-1 font-extrabold flex-grow-0">
            <span class="sp-search-icon flex justify-center items-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="ml-2 bi bi-search" viewBox="0 0 16 16">
                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
              </svg>
              <!-- 搜尋框 -->
              <input class="inp-space-search ml-1" placeholder="搜尋 新的工作空間 # select2">   
            </span>
          </div>
          <!-- End of  space-search-group-->
          <!-- </div> -->

          <!-- ＴＯＰ 最右側的頭像 User Avatar -->
          <div class="online-user flex-grow flex justify-end items-center">
            <span tabindex="0" class="sp-user-avatar">
              <img src="http://fakeimg.pl/24x24/00CED1/FFF/?text=A">
            </span> 

            <!-- hidden list - User profile list -->
            <div id="user-profile-list" class="stork-dropdown-common" tabindex="0">
              <div class="user-profile-icon-group flex justify-evenly items-center">
                <div>
                  <img src="http://fakeimg.pl/48x48/00CED1/FFF/?text=A">
                </div>
                <div class="user-status-group">
                  <span class="user-profile-name block">##current_user##</span>
                  <span class="user-profile-status block">##current_user_status##</span>
                </div>
              </div>
              <div><span class="user-status-update">更新你的狀態</span></div>
              <div><span>將你自己設定為##user_status_name##</span></div>
              <div><span>編輯個人檔案</span></div>
              <div><span>檢視個人檔案</span></div>
              <div><span>偏好設定</span></div>
              <div><span>登出##space_name##</span></div>
            </div>
            <!-- End of User profile list -->
          </div>
          <!-- End of User Avatar -->



      <!-- ＴＯＰ 最右側的頭像 User Avatar -->
      <div class="online-user">
        <span tabindex="0" class="sp-user-avatar">
          <img src="http://fakeimg.pl/24x24/00CED1/FFF/?text=A">
        </span>
      </div>
    </div>
  </div>
</div>
<!-- 0 TOP 最上層 搜尋 end -->


<!-- 公版開始 -->
<div class="outer-panel container font-sans antialiased h-screen">
  <!-- 1 最左側的 ＩＣＯＮ ＬＩＳＴ -->
  <div class="space-icons-panel flex-none w-24 p-6 md:block">

    <div class="space-icon-group cursor-pointer mb-4">
      <% @space_public_channels.each do |mall| %>
        <div
          class="bg-white h-12 w-12 flex items-center justify-center text-black text-sm font-semibold rounded-lg mb-1 overflow-hidden">
          <%= link_to  mall.space.name, space_channel_path(space_id: mall.space.slug, id: mall.slug) %>
        </div>
        <!-- 0 TOP 最上層 搜尋 end -->


        <!-- dialog 編輯個人檔案 -->
<!--         <div class="wallpaper hidden" data-controller="channelbox" data-channelbox-target="page">
          <div class="dialog-box">
            <h2>編輯個人檔案</h2>
            <button data-action="click->channelbox#close" class="close" >X</button>

            <form action="POST" class="flex justify-center items-center outline-black">

              <div class="current-user-name outline-black m-4">
                <label for="inp-current-user-name" class="block my-2">全名
                  <input type="text" id="inp-current-user-name" class="block border-grey-light border-2" placeholder="全名">
                </label>
                <label for="inp-current-user-nickname" class="block">顯示名稱
                  <input type="text" id="inp-current-user-nickname" class="block border-black border-2" placeholder="顯示名稱">
                </label>
              </div>

              <div class="current-user-avatar-group py-3">
                <div class="outline-black p-2"><img src="http://fakeimg.pl/192x192/00CED1/FFF/?text=User"></div>
                <div class="py-3">
                  <button class="w-full py-1 my-2 border-2 border-gray-200">上傳影像</button>
                  <button class="w-full py-1 my-2  border-2 border-gray-200">移除相片</button>
                </div>

              </div>
            </form>

          </div>
        </div> -->
        <!-- End of dialog 編輯個人檔案 -->






        <!-- 公版開始 -->
        <div class="outer-panel container font-sans antialiased h-screen">
          <!-- 1 最左側的 ＩＣＯＮ ＬＩＳＴ -->
          <div class="space-icons-panel flex-none w-20 p-4 md:block">

            <div class="space-icon-group cursor-pointer mb-4">
              <div
              class="bg-white h-12 w-12 flex items-center justify-center text-black text-2xl font-semibold rounded-lg mb-1 overflow-hidden">
              <img src="#" alt="">
              ST
            </div>
          </div>

          <!-- ＳＰＡＣＥ ＩＣＯＮ - 新增 Space -->
          <div class="cursor-pointer">
            <div
            class="bg-white sticky top-0 left-0 opacity-25 h-12 w-12 flex items-center justify-center text-black text-2xl font-semibold rounded-lg mb-1 overflow-hidden">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
              <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"/>
            </svg>
          </div>
        </div>
        <!-- ＳＰＡＣＥ ＩＣＯＮ - end -->
      </div>
      <!-- 1 end -->

      <!-- 側邊欄部分開始 -->
      <%= render "shared/sidebar", channels: @channels, lobby_channel: @lobby_channel %>
      <!-- 側邊欄部分結束 -->
      <%# </div> %>

      <div class="stork-panel flex flex-col flex-1 bg-white overflow-hidden"  data-controller="channel" data-channel-channelid=<%= @channel.id %> data-channel-spaceid=<%= @space.id %>>

        <!-- 2 start -->
        <!-- Top bar -->
        <div class="space-target-title border-b items-center flex-none bg-gray">

          <div class="flex justify-between items-center">
            <div class="flex flex-col">
              <h3 class="title-emphasize mb-1 font-extrabold">
                <!-- RWD 視窗縮小後會出現的ＩＣＯＮ - 控制 sidebar 從左邊滑入 - toggle 控制 -->
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-layout-text-sidebar" viewBox="0 0 16 16">
                  <path d="M3.5 3a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zM3 9.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5z"/>
                  <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm12-1v14h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zm-1 0H2a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h9V1z"/>
                </svg>

                <span>
                  <% if @channel.direct_message %>
                  <%= @recipient.name %>
                  <% else %>
                  <%= @channel.name %>
                  <% end %>
                </span>

                <svg id="channel-mute-off" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="hidden bi bi-bell-slash" viewBox="0 0 16 16">
                  <path d="M5.164 14H15c-.299-.199-.557-.553-.78-1-.9-1.8-1.22-5.12-1.22-6 0-.264-.02-.523-.06-.776l-.938.938c.02.708.157 2.154.457 3.58.161.767.377 1.566.663 2.258H6.164l-1 1zm5.581-9.91a3.986 3.986 0 0 0-1.948-1.01L8 2.917l-.797.161A4.002 4.002 0 0 0 4 7c0 .628-.134 2.197-.459 3.742-.05.238-.105.479-.166.718l-1.653 1.653c.02-.037.04-.074.059-.113C2.679 11.2 3 7.88 3 7c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0c.942.19 1.788.645 2.457 1.284l-.707.707zM10 15a2 2 0 1 1-4 0h4zm-9.375.625a.53.53 0 0 0 .75.75l14.75-14.75a.53.53 0 0 0-.75-.75L.625 15.625z"/>
                </svg>

                <svg id="channel-mute-on" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="hidden bi bi-bell" viewBox="0 0 16 16">
                  <path d="M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2zM8 1.918l-.797.161A4.002 4.002 0 0 0 4 6c0 .628-.134 2.197-.459 3.742-.16.767-.376 1.566-.663 2.258h10.244c-.287-.692-.502-1.49-.663-2.258C12.134 8.197 12 6.628 12 6a4.002 4.002 0 0 0-3.203-3.92L8 1.917zM14.22 12c.223.447.481.801.78 1H1c.299-.199.557-.553.78-1C2.68 10.2 3 6.88 3 6c0-2.42 1.72-4.44 4.005-4.901a1 1 0 1 1 1.99 0A5.002 5.002 0 0 1 13 6c0 .88.32 4.2 1.22 6z"/>
                </svg>

                <svg id="channel-hightlight" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="hidden bi bi-star" viewBox="0 0 16 16">
                  <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                </svg>
                <svg id="channel-highlighted" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="hidden bi bi-star-fill" viewBox="0 0 16 16">
                  <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                </svg>
              </h3>
              <!--      <div class="text-grey-dark text-sm truncate">
                Chit-chattin' about ugly HTML and mixing of concerns.
              </div> -->
            </div>
            <div class="online-users" data-user="<%= current_user.email %>"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-person-square" viewBox="0 0 16 16">
              <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
              <path d="M2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2zm12 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1v-1c0-1-1-4-6-4s-6 3-6 4v1a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12z"/>
            </svg>
          </div>

        </div>    
      </div>
      <!-- 2 end -->







      <!-- 2 start -->
      <!-- Chat messages -->
      <div class="chat-message px-6 py-4 flex-1 overflow-y-scroll" data-channel-target="messages">
        <% @channel.messages.each do |message| %>
        <%= render "messages/message" , message: message %>
        <% end %>
      </div>
      <!-- 2 end -->

      <!-- 2 start -->
      <div class="message-editor-panel mb-8 pb-6 px-4 flex-none">
        <div class="message-editor flex rounded-lg border-2 border-grey overflow-hidden">
          <span class="text-3xl text-grey border-r-2 border-grey py-2 px-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="text-gray-400 bi bi-plus-lg" viewBox="0 0 16 16">
              <path d="M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z"/>
            </svg>
          </span>


          <%= form_with model: Message.new, url: space_channel_messages_path(@space, @channel), class: "flex w-full" , data: { action: "channel#sendMessage" } do |form| %>
          <%= form.text_field :content, class: "w-full px-4" , placeholder: "Type your message" %>
          <span class="text-3xl text-grey border-l-2 border-grey py-2 px-4">
            <%= image_submit_tag 'cursor-fill.svg'%>
          </span>
          <%#= form.submit "Sent Message"  %>
          <% end %>
          <%#= render "messages/form" , message: Message.new, channel: @channel %>

        </div>

      </div>
      <!-- 2 end -->
      <!-- 公版結束 -->


          <!-- 公版結束 -->
